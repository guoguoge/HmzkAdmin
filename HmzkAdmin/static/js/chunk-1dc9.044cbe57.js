(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1dc9"],{"8rUb":function(e,t,n){"use strict";var r=n("lk/d");n.n(r).a},Rzbo:function(e,t,n){"use strict";n.r(t);var r=n("bS4n"),o=n.n(r),a=n("5axN"),i=n("7Qib"),l=n("8t5x"),c=n("1Fam"),s=n("Yfch"),u={data:function(){return{dialogTitle:"新建收款信息",show:!1,collectionId:"",bankList:[{label:"银行卡",value:1},{label:"数字货币",value:2}],form:{cardname:"",type:"",cardnum:"",bank:""},rules:{type:[{type:"number",required:!0,message:"请选择收款类型",trigger:"blur"}],cardname:[{type:"string",required:!0,validator:s.c,trigger:"blur"}],cardnum:[{type:"string",required:!0,validator:s.c,trigger:"blur"}],bank:[{type:"string",validator:s.c,trigger:"blur"}]},rowData:[],column:[{headerName:"支付方式",field:"type",cellStyle:{color:"#8D8D8D"},cellRenderer:function(e){return 1==e.data.type?"银行卡":"数字货币"},valueGetter:function(e){return 1==e.data.type?"银行卡":"数字货币"}},{headerName:"开户名/币种",field:"cardname",cellStyle:{color:"#8D8D8D"}},{headerName:"开户银行",field:"bank",cellStyle:{color:"#8D8D8D"}},{headerName:"银行卡号/钱包地址",field:"cardnum",cellStyle:{color:"#8D8D8D"},cellRenderer:function(e){return e.data.cardnum},valueGetter:function(e){return e.data.cardnum}},{headerName:"状态",field:"age",cellStyle:{color:"#8D8D8D"},cellRenderer:function(e){return 1==e.data.status?"可用":"不可用"},valueGetter:function(e){return 1==e.data.status?"可用":"不可用"}},{headerName:"操作",field:"",cellRendererFramework:"collectionButton",cellStyle:{color:"#8D8D8D"},pinned:"right",width:300}],config:{width:200,sortable:!0,resizable:!0,filter:!0,search:!0}}},computed:o()({},Object(l.b)(["token"])),components:{AGTable:a.a},methods:{init:function(){var e=this;Object(c.CardList)(this.token).then(function(t){e.rowData=Object(i.a)(t,!1),console.log(e.rowData)})},typeChange:function(){this.form.bank=""},operationEdit:function(e,t,n){var r=this;this.collectionId=e.id,1==n?(this.dialogTitle="修改收款信息",this.show=!0,this.form.cardname=e.cardname,this.form.type=e.type,this.form.cardnum=e.cardnum,this.form.bank=e.bank):Object(c.UnlockCard)(this.token,1==e.status?2:1,this.collectionId).then(function(e){Object(i.a)(e,!0),r.show=!1,r.init()}),console.log(e,t)},operationDelete:function(e,t){var n=this;console.log(e),this.collectionId=e.id,Object(c.DelCard)(this.token,this.collectionId).then(function(e){Object(i.a)(e,!0),n.show=!1,n.init()})},addNotice:function(){this.dialogTitle="新建收款信息",this.show=!0},submit:function(){var e=this;this.$refs.form.validate(function(t){t?"新建收款信息"==e.dialogTitle?Object(c.AddCard)(e.token,e.form.cardname,e.form.type,e.form.cardnum,e.form.bank).then(function(t){Object(i.a)(t,!0)&&(e.$refs.form.resetFields(),e.form.bank="",e.show=!1,e.init())}):Object(c.UpdateCard)(e.token,e.collectionId,e.form.cardname,e.form.type,e.form.cardnum,e.form.bank).then(function(t){Object(i.a)(t,!0)&&(e.$refs.form.resetFields(),e.show=!1,e.init())}):e.$message({message:"请按要求填写表单",type:"warning"})})}},created:function(){this.init()},beforeMount:function(){},mounted:function(){}},d=(n("8rUb"),n("ZrdR")),f=Object(d.a)(u,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("AGTable",{attrs:{rowData:e.rowData,columnDefs:e.column,defaultColDef:e.config},on:{operationDelete:e.operationDelete,operationEdit:e.operationEdit},scopedSlots:e._u([{key:"notice",fn:function(t){return[n("el-button",{staticClass:"beesbit-sec-btn",nativeOn:{click:function(t){return e.addNotice(t)}}},[e._v("新建收款信息")])]}}])}),e._v(" "),n("el-dialog",{attrs:{visible:e.show,title:e.dialogTitle,width:"30%",center:""},on:{"update:visible":function(t){e.show=t}}},[n("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"status-icon":"","label-position":"top"}},[n("el-form-item",{attrs:{label:"收款类型",prop:"type"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择收款类型"},on:{change:e.typeChange},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},e._l(e.bankList,function(e,t){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"开户名称/币种",prop:"cardname"}},[n("el-input",{attrs:{placeholder:"输入开户名称/币种",type:"text"},model:{value:e.form.cardname,callback:function(t){e.$set(e.form,"cardname",t)},expression:"form.cardname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"开户银行(数字货币不填)",prop:1==e.form.type?"bank":""}},[n("el-input",{attrs:{placeholder:"输入开户银行(数字货币不填)",type:"text",disabled:1!=e.form.type},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"开户卡号/钱包地址",prop:"cardnum"}},[n("el-input",{attrs:{placeholder:"输入开户卡号/钱包地址",type:"text"},model:{value:e.form.cardnum,callback:function(t){e.$set(e.form,"cardnum",t)},expression:"form.cardnum"}})],1)],1),e._v(" "),n("el-button",{staticClass:"beesbit-btn",staticStyle:{width:"100%"},attrs:{size:"large",disabled:!e.show},on:{click:e.submit}},[e._v("确 定")])],1)],1)},[],!1,null,"0fa04851",null);f.options.__file="collection.vue";t.default=f.exports},Yfch:function(e,t,n){"use strict";n.d(t,"e",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"c",function(){return l});function r(e){return/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/.test(e)}var o=function(e,t,n){/^[\u4E00-\u9FA5]+$/.test(t)?t.length>8?n(new Error("姓名长度过长")):n():n(new Error("错误的姓名"))},a=function(e,t,n){/^[1][3,4,5,7,8][0-9]{9}$/.test(t)?n():n(new Error("手机号格式错误"))},i=function(e,t,n){t?/^([a-zA-Z]|[0-9])(\w|\-)+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/.test(t)?n():n(new Error("邮箱地址格式错误")):n(new Error("邮箱地址不能为空"))},l=function(e,t,n){t.trim()?/[`~!@#$%^&*()_+<>?:"{},.\/;'[\]]/im.test(t)||/[·！#￥（——）：；“”‘、，|《。》？、【】[\]]/im.test(t)?n(new Error("内容不能包含特殊字符")):n():n(new Error("内容不能为空"))}},"lk/d":function(e,t,n){}}]);