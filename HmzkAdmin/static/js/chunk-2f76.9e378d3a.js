(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2f76"],{Q1fB:function(e,t,r){},QyYw:function(e,t,r){"use strict";var a=r("Q1fB");r.n(a).a},oEWH:function(e,t,r){"use strict";r.r(t);var a=r("bS4n"),o=r.n(a),i=r("5axN"),s=r("7Qib"),l=r("8t5x"),n=r("1Fam"),c={data:function(){var e=this;return{rowData:[],column:[{headerName:"商品名",field:"name",cellStyle:{color:"#8D8D8D"}},{headerName:"分类名",field:"cate_name",cellStyle:{color:"#8D8D8D"}},{headerName:"分类id",field:"cate_id",cellStyle:{color:"#8D8D8D"}},{headerName:"开始时间",field:"start",cellStyle:{color:"#8D8D8D"}},{headerName:"结束时间",field:"end",cellStyle:{color:"#8D8D8D"}},{headerName:"人气",field:"hot",cellStyle:{color:"#8D8D8D"}},{headerName:"马甲号ID",field:"vest_user",cellStyle:{color:"#8D8D8D"}},{headerName:"马甲号的出价",field:"vest_price",cellStyle:{color:"#8D8D8D"}},{headerName:"起拍价",field:"bottom_price",cellStyle:{color:"#8D8D8D"}},{headerName:"加价",field:"raise_price",cellStyle:{color:"#8D8D8D"}},{headerName:"马甲中奖id",field:"vest_user",cellStyle:{color:"#8D8D8D"},cellRenderer:function(e){return e.data.vest_user||"暂无"},valueGetter:function(e){return e.data.vest_user||"暂无"}},{headerName:"马甲中奖昵称",field:"vest_name",cellStyle:{color:"#8D8D8D"}},{headerName:"人气",field:"hot",cellStyle:{color:"#8D8D8D"}},{headerName:"运行",field:"status",cellStyle:{color:"#8D8D8D"},cellRenderer:function(e){return 1==e.data.status?"上架":"下架"},valueGetter:function(e){return 1==e.data.status?"上架":"下架"}},{headerName:"操作",field:"",cellRendererFramework:"actionOperationButton",cellStyle:{color:"#8D8D8D"},pinned:"right",width:200}],config:{width:150,sortable:!0,resizable:!0,filter:!0,search:!0},pickerOptions:{disabledDate:function(t){return""!=e.form.end?t.getTime()<Date.now()||t.getTime()<e.form.end:t.getTime()<Date.now()}},pickerOptions1:{disabledDate:function(t){return t.getTime()<e.form.start}},rowContent:{},show:!1,form:{category:"",name:"",price:0,vest_user:"",vest_price:"",bottom_price:1,raise_price:1,hot:1,start:"",end:"",status:1,cover_img:"",detail_img:""},rules:{name:[{type:"string",required:!0,message:"请输入商品名称",trigger:"blur"}],category:[{type:"number",required:!0,message:"请输入商品所属分类",trigger:"blur"}],price:[{type:"number",required:!0,message:"请输入参与价格",trigger:"blur"}],vest_user:[{message:"请输入马甲号",trigger:"blur"}],vest_price:[{type:"string",message:"请输入马甲号竞拍价格",trigger:"blur"}],raise_price:[{required:!0,type:"number",message:"请输入单次加价",trigger:"blur"}],bottom_price:[{required:!0,type:"number",message:"请输入起拍价格",trigger:"blur"}],hot:[{type:"number",message:"基础人气",trigger:"blur"}],start:[{type:"date",required:!0,message:"请输入开始时间",trigger:"blur"}],end:[{type:"date",required:!0,message:"请输入结束时间",trigger:"blur"}]},title:"",cateId:"",categoryList:[],dialogImageUrl:"",dialogVisible:!1,fileList:[],fileList2:[],num:"",vestUserList:[]}},computed:o()({},Object(l.b)(["token"])),components:{AGTable:i.a},methods:{init:function(){var e=this;Object(n.l)(this.token,4).then(function(t){e.rowData=Object(s.a)(t,!1),console.log(e.rowData)}),Object(n.a)(this.token,4).then(function(t){Object(s.a)(t,!1).forEach(function(t){e.categoryList.push({value:t.cate_id,label:t.cat_name})}),e.form.category=e.categoryList[0].value,console.log(Object(s.a)(t,!1))}),Object(n.cb)(this.token).then(function(t){var r=Object(s.a)(t,!1);r&&(e.vestUserList=r),console.log(r,"马甲用户")})},operationEdit:function(e,t){console.log(e,"row"),console.log(Date.parse(new Date(e.end)),"时间"),this.cateId=e.id,this.num=2,this.show=!0,this.title="修改竞拍商品",this.form.category=e.cate_id,this.form.name=e.name,this.form.price=e.price,this.form.vest_user=e.vest_user,this.form.hot=e.hot,this.form.start=Date.parse(new Date(e.start)),this.form.end=Date.parse(new Date(e.end)),this.form.status=e.status},operationDelete:function(e,t){var r=this,a=new FormData;a.append("token",this.token),a.append("method",2),a.append("id",e.id),a.append("status",1==e.status?2:1),Object(n.o)(a).then(function(e){Object(s.a)(e,!0)&&(r.show=!1,r.init())})},handleUpload:function(e){return console.log(e),this.fileList=[],this.fileList.push(e),!1},handleUpload2:function(e){return console.log(e),this.fileList2.push(e),!1},showDialog:function(e){this.$refs.form.resetFields(),this.fileList=[],this.fileList2=[],this.show=!0,this.num=1,1==e&&(this.title="新建竞拍商品")},submit:function(){var e=this;console.log(this.form),console.log(this.fileList),console.log(this.fileList2),console.log(this.num),this.$refs.form.validate(function(t){if(t){var r=new FormData;r.append("token",e.token),r.append("method",1==e.num?1:3),r.append("name",e.form.name),r.append("cate_id",e.form.category),r.append("bottom_price",e.form.bottom_price),r.append("raise_price",e.form.raise_price),r.append("vest_user",e.form.vest_user),r.append("vest_price",e.form.vest_price),r.append("hot",e.form.hot),r.append("start",e.form.start/1e3),r.append("end",e.form.end/1e3),r.append("status",e.form.status),e.fileList[0]&&r.append("cover_img",e.fileList[0]),2==e.num&&r.append("id",e.cateId),e.fileList2.length&&e.fileList2.forEach(function(e,t){r.append("detail_img[]",e||"")}),e.form.name?1==e.num?Object(n.e)(r).then(function(t){Object(s.a)(t,!1)?(e.$message({message:"新建商品成功!",type:"success"}),e.$refs.form.resetFields(),e.fileList=[],e.fileList2=[],e.init(),e.show=!1):e.$message({message:Object(s.f)(t.data).msg,type:"error"})}):Object(n.H)(r).then(function(t){Object(s.a)(t,!1)?(e.$message({message:"修改商品成功!",type:"success"}),e.rowData=Object(s.a)(t,!1),e.$refs.form.resetFields(),e.fileList=[],e.fileList2=[],e.init(),e.show=!1):e.$message({message:Object(s.f)(t.data).msg,type:"error"})}):e.$message({message:Object(s.f)(res.data).msg,type:"error"})}else e.$message({message:"请按要求填写表单",type:"warning"})})}},created:function(){this.init()},beforeMount:function(){},mounted:function(){}},m=(r("QyYw"),r("ZrdR")),p=Object(m.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{attrs:{type:"flex",justify:"end"}},[r("el-col",{staticStyle:{"text-align":"right",marginBottom:"1rem"},attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showDialog(1)}}},[r("i",{staticClass:"el-icon-circle-plus"}),e._v(" 新增竞拍商品")])],1)],1),e._v(" "),r("AGTable",{attrs:{rowData:e.rowData,columnDefs:e.column,defaultColDef:e.config},on:{operationDelete:e.operationDelete,operationEdit:e.operationEdit}}),e._v(" "),r("el-dialog",{attrs:{visible:e.show,title:e.title,width:"70%",center:""},on:{"update:visible":function(t){e.show=t}}},[r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{"status-icon":"",rules:e.rules,model:e.form,"label-position":"left"}},[r("el-row",{attrs:{type:"flex",justify:"space-between",gutter:20}},[r("el-col",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"商品名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入商品名称",autocomplete:"off"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),r("el-col",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"商品分类",prop:"category"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"选择商品分类"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categoryList,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-col",[r("el-form-item",{attrs:{label:"起拍价格",prop:"bottom_price"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,label:"起拍价格"},model:{value:e.form.bottom_price,callback:function(t){e.$set(e.form,"bottom_price",e._n(t))},expression:"form.bottom_price"}})],1)],1),e._v(" "),r("el-col",[r("el-form-item",{attrs:{label:"单次加价价格",prop:"raise_price"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,label:"单次加价价格"},model:{value:e.form.raise_price,callback:function(t){e.$set(e.form,"raise_price",e._n(t))},expression:"form.raise_price"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",gutter:20}},[r("el-col",[r("el-form-item",{attrs:{label:"马甲中奖id(非必填)",prop:"vest_user"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"马甲中奖人(非必填)"},model:{value:e.form.vest_user,callback:function(t){e.$set(e.form,"vest_user",t)},expression:"form.vest_user"}},e._l(e.vestUserList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:String(e.id)}})}))],1)],1),e._v(" "),r("el-col",[r("el-form-item",{attrs:{label:"马甲号竞拍价格(非必填)",prop:"vest_price"}},[r("el-input",{attrs:{placeholder:"马甲号竞拍价格(非必填)"},model:{value:e.form.vest_price,callback:function(t){e.$set(e.form,"vest_price",t)},expression:"form.vest_price"}})],1)],1),e._v(" "),r("el-col",[r("el-form-item",{attrs:{label:"基础人气",prop:"hot"}},[r("el-input-number",{staticStyle:{width:"100%"},attrs:{min:1,label:"输入基础人气(非必填)"},model:{value:e.form.hot,callback:function(t){e.$set(e.form,"hot",t)},expression:"form.hot"}})],1)],1)],1),e._v(" "),r("el-row",{attrs:{type:"flex",justify:"space-between",gutter:20}},[r("el-col",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"开始时间",prop:"start"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",format:"yyyy-MM-ddHH:mm:ss","picker-options":e.pickerOptions,type:"datetime",placeholder:"选择开始时间"},model:{value:e.form.start,callback:function(t){e.$set(e.form,"start",t)},expression:"form.start"}})],1)],1),e._v(" "),r("el-col",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"结束时间(需选择开始时间)",prop:"end"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"timestamp",disabled:!e.form.start,format:"yyyy-MM-ddHH:mm:ss","picker-options":e.pickerOptions1,type:"datetime",placeholder:"选择结束时间"},model:{value:e.form.end,callback:function(t){e.$set(e.form,"end",t)},expression:"form.end"}})],1)],1)],1),e._v(" "),r("el-form-item",[r("el-upload",{staticClass:"upload-demo",attrs:{action:"#",multiple:!1,limit:1,"before-upload":e.handleUpload,"file-list":e.fileList}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("封面图")])],1)],1),e._v(" "),r("el-form-item",[r("el-upload",{staticClass:"upload-demo",attrs:{action:"#","before-upload":e.handleUpload2,"file-list":e.fileList2}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("详情图")])],1)],1)],1),e._v(" "),r("el-button",{staticStyle:{width:"100%"},attrs:{size:"large",type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)]),e._v(" "),r("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},[],!1,null,"495c3f92",null);p.options.__file="workbench.vue";t.default=p.exports}}]);